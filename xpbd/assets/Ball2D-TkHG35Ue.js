var z=Object.defineProperty;var y=(h,t,i)=>t in h?z(h,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[t]=i;var c=(h,t,i)=>(y(h,typeof t!="symbol"?t+"":t,i),i);import{f as p,g as m,h as x,i as w,o as R,c as D,j as f,F}from"./vendor-HXh8C_8F.js";const S=h=>{let t=!1;return p(()=>{const i=()=>{requestAnimationFrame(()=>{if(t)return;h()&&i()})};i()}),m(()=>{t=!0}),{}};class _{constructor(t,i=!0,e=!0){c(this,"_canvas");c(this,"_width");c(this,"_height");c(this,"_isDisposed",!1);c(this,"_contentScaleFactor",1);c(this,"_highDefinition",!0);c(this,"_autoResize",!0);this._canvas=t,this._highDefinition=i,this._autoResize=e,this.window_resize=this.window_resize.bind(this),window.addEventListener("resize",this.window_resize,!1),this._autoResize&&this.resize()}get contentScaleFactor(){return this._contentScaleFactor}get highDefinition(){return this._highDefinition}set highDefinition(t){this._highDefinition!==t&&(this._highDefinition=t,this.resize())}get autoResize(){return this._autoResize}set autoResize(t){this._autoResize!==t&&(this._autoResize=t,this.resize())}dispose(){this._isDisposed||(this._isDisposed=!0,window.removeEventListener("resize",this.window_resize,!1))}resize(){let t=this._canvas.parentNode;if(t===null||typeof t>"u")return;let i=this._canvas.style.display;this._canvas.style.display="none";let e=t.clientWidth,r=t.clientHeight,a=1;if(this._highDefinition){let o=_.readViewportScale();if(o!=null){let u=window.devicePixelRatio?window.devicePixelRatio:1;u!=1&&(a=u*o)}}this._contentScaleFactor=a,e*=a,r*=a;let l=!0;if(this._width===e&&this._height===r&&(l=!1),l){this._canvas.width=e,this._canvas.height=r,this._width=e,this._height=r;let o=this._canvas.getContext("2d");o.setTransform(1,0,0,1,0,0),o.scale(this._contentScaleFactor,this._contentScaleFactor)}this._canvas.style.display=i,l&&this._canvas.dispatchEvent(new Event("resize"))}window_resize(){this._autoResize&&this.resize()}static readViewportScale(){let t=document.querySelectorAll("meta[name=viewport]"),i=null;if(t.length>0&&(i=t[t.length-1]),i===null)return null;let e=i.content;if(e===""||e===null)return null;let r=e.split(",");for(let a=0;a<r.length;++a){let l=r[a];for(;l.indexOf(" ")>=0;)l=l.replace(" ","");let o=l.split("="),u=o[0],v=o[1];if(u==="initial-scale")return Math.round(parseFloat(v)*1e3)/1e3}return null}}const B=f("p",null,"Ball2D Example",-1),d=1/60,E=20,C=x({__name:"Ball2D",setup(h){const t=w(null),i=w(null),e={radius:.2,pos:{x:.2,y:.2},vel:{x:5,y:7}},r={x:0,y:-10},a=(s,n)=>s.x*n,l=(s,n)=>i.value.height-s.y*n,o=(s,n)=>{s.clearRect(0,0,i.value.width,i.value.height),s.fillStyle="#FF0000",s.beginPath(),s.arc(a(e.pos,n),l(e.pos,n),n*e.radius,0,2*Math.PI),s.closePath(),s.fill()},u=s=>{e.vel.x+=r.x*d,e.vel.y+=r.y*d,e.pos.x+=e.vel.x*d,e.pos.y+=e.vel.y*d,e.pos.x<0&&(e.pos.x=0,e.vel.x=-e.vel.x),e.pos.x>s&&(e.pos.x=s,e.vel.x=-e.vel.x),e.pos.y<0&&(e.pos.y=0,e.vel.y=-e.vel.y)},v=()=>{const s=i.value;s.height=window.innerHeight,s.width=window.innerWidth};return p(()=>{const s=i.value;s.height=window.innerHeight,s.width=window.innerWidth,s.addEventListener("resize",v,!1),new _(s).resize()}),S(()=>{const s=i.value.getContext("2d"),n=Math.min(i.value.width,i.value.height)/E,g=i.value.width/n;return u(g),o(s,n),!0}),(s,n)=>(R(),D(F,null,[B,f("div",{ref_key:"viewer",ref:t,class:"viewer"},[f("canvas",{id:"cvs",ref_key:"canvas",ref:i,class:"renderer"},null,512)],512)],64))}});export{C as default};
